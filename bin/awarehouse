#! /usr/bin/env python

# @Author: Antoine Pointeau <kalif>
# @Date:   2017-10-22T16:54:20+02:00
# @Email:  web.pointeau@gmail.com
# @Filename: a42_warehouse.py
# @Last modified by:   kalif
# @Last modified time: 2017-11-23T00:51:31+01:00

import sys
import argparse

from awarehouse import AWContext
from awarehouse import cli


def create_parser():
    parser = argparse.ArgumentParser()
    subparsers = parser.add_subparsers()

    cli.afs.create_sub_parser(subparsers)
    cli.cleaner.create_sub_parser(subparsers)
    cli.storage.create_sub_parser(subparsers)

    return parser


def main():
    parser = create_parser()
    if len(sys.argv) > 2:
        sys.argv.insert(2, '--')
    args = parser.parse_args()
    awc = AWContext()
    return args.handler(awc, args)


if __name__ == "__main__":
    main()
